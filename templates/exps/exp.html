{% extends 'new_project.html' %} 
{% load static %} 
{% block project_name %}
{{project.project_name }} 
{% endblock %} 
{% block exp_block %} 
{% if experiments%}
<div class="container">
    <div class="container p-3 card bg-white rounded mb-5">
      <div class="row justify-content-between align-content-between card-body">
        <div class="col-md">
          <h2 class="font-weight-bold text-black fs-1">
            {{project.project_name}}
          </h2>
          <div class="d-md-flex flex-wrap">
            <p class="text-break mb-md-3 mr-md-3" style="max-width: calc(100% - 150px);">
              {% comment %} {{project.description }} {% endcomment %} Lorem ipsum dolor sit, amet consectetur adipisicing elit. Optio, possimus voluptatibus! Obcaecati architecto veniam vel, similique maxime excepturi quidem rem eaque consequatur dolorem! Quod ullam ad illum doloremque, eius nesciunt!
            </p>
          </div>
          <a href="{% url 'create_experiment' project_id=project.id %}" class="btn article">
            <i class='bx bx-plus' href="{% url 'create_experiment' project_id=project.id %}"></i> New Experiment
          </a>
        </div>
        <div class="col-md-auto d-flex justify-content-end">
          <img src="https://www.kdnuggets.com/wp-content/uploads/wijaya_top_machine_learning_papers_read_2023_1.jpg" alt="Image Description" class="img-fluid d-none d-md-inline-block" style="max-width: 300px; max-height: 300px;">
        </div>
      </div>
        <form action="">  
          <div class="input-group mb-4">  
            <input type="search" placeholder="Search here..." aria-describedby="button-addon5" class="form-control">  
            <div class="input-group-append">  
              <a id="button-addon5" type="submit" class="btn article"> <i class="fa fa-search"> </i> </a>  
            </div> 
        </form>
    </div>
  </div>
  
  <div class="d-flex justify-content-end mb-5">
    <div class="btn-group" id="btnGroup" role="group">
        <button type="button" class="btn btn-outline-dark active" data-filter="all">All</button>
        <button type="button" class="btn btn-outline-dark" data-filter="active">Active</button>
        <button type="button" class="btn btn-outline-dark" data-filter="stopped">Stopped</button>
    </div>
</div>

  {% comment %} <div class="container"> {% endcomment %}
    <div class="row">
        {% for experiment in experiments %}
        <div class="col-md-3 mb-4 experiment-card" data-status="{{ experiment.status }}">
            <div class="card card-exp">
                <img class="card-img-top mh-100" src="{{ experiment.random_image_url }}" alt="Card image cap">
                <div class="card-body" style="max-height: 150px; overflow: hidden;">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h5 class="card-title" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 0;">{{ experiment.name }}</h5>
                        <p class="status" style="color: {% if experiment.status == 'active' %}darkgreen{% else %}darkred{% endif %}; font-weight: bold; margin-bottom: 0;">{{ experiment.get_status_display }}</p>
                    </div>
                    <div class="card-text" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        <p class="dataset">{{ experiment.dataset.file_name|slice:'-3' }}</p>
                        {% comment %} <p>{{ experiment.description }}</p> {% endcomment %}
                    </div>
                </div>
            </div>
        </div>
        {% if forloop.counter|divisibleby:4 and not forloop.last %}
    </div>
    <div class="row"> <!-- Start a new row after every 4 experiments -->
        {% endif %}
        {% endfor %}
    </div>      
  {% comment %} </div> {% endcomment %}
  
{% else %}
<div class="center-container container-fluid">
  <img
    src="{% static 'images/exp.png' %}"
    alt="No projects available"
    width="500"
    height="500"
    class="img-fluid p-5"
  />
  <h6 class="font-weight-bold">
    Project {{ project.project_name }} has no experiments
  </h6>
  <div class="paragraph-wrapper text-center">
    <p>
      Press new experiment to create a new machine learning experiment for this
      project
    </p>
  </div>
  <a
    href="{% url 'create_experiment' project_id=project.id %}"
    class="btn article"
    >New Experiment</a
  >
</div>
{% endif %} 
<style>
    .btn-outline-dark {
        width: 120px; /* Adjust width as needed */
    }

    .card-img-top {
        width: 100%;
        height: 6vw;
        object-fit: cover;
    }

    .card-title {
        font-size: 15px;
        font-weight: bold;
    }

    .card-exp {
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Add shadow */
    }

    .card-exp:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2); /* Increase shadow on hover */
    }

    .dataset {
        color: black;
        font-weight: 400;
        font-size: 12px;
    }
</style>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll("#btnGroup button");

        buttons.forEach(function (button) {
            button.addEventListener("click", function () {
                const filter = this.getAttribute("data-filter");
                const cards = document.querySelectorAll(".experiment-card");

                cards.forEach(function (card) {
                    if (filter === "all") {
                        card.style.display = "block";
                    } else {
                        const status = card.getAttribute("data-status");
                        if (status === filter) {
                            card.style.display = "block";
                        } else {
                            card.style.display = "none";
                        }
                    }
                });

                buttons.forEach(function (btn) {
                    btn.classList.remove("active");
                });

                this.classList.add("active");
            });
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const buttons = document.querySelectorAll("#btnGroup button");

        buttons.forEach(function (button) {
            button.addEventListener("click", function () {
                filterCards(this.getAttribute("data-filter"));
                toggleActiveButton(buttons, this);
            });
        });

        const searchInput = document.querySelector(".form-control");
        searchInput.addEventListener("input", function () {
            const searchTerm = this.value.trim().toLowerCase();
            const cards = document.querySelectorAll(".experiment-card");

            cards.forEach(function (card) {
                const experimentName = card.querySelector(".card-title").textContent.trim().toLowerCase();
                if (experimentName.includes(searchTerm)) {
                    card.style.display = "block";
                } else {
                    card.style.display = "none";
                }
            });
        });
    });

    function filterCards(filter) {
        const cards = document.querySelectorAll(".experiment-card");

        cards.forEach(function (card) {
            if (filter === "all") {
                card.style.display = "block";
            } else {
                const status = card.getAttribute("data-status");
                if (status === filter) {
                    card.style.display = "block";
                } else {
                    card.style.display = "none";
                }
            }
        });
    }

    function toggleActiveButton(buttons, activeButton) {
        buttons.forEach(function (button) {
            button.classList.remove("active");
        });
        activeButton.classList.add("active");
    }
</script>


{% endblock %}
